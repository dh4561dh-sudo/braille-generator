<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<title>Braille Transcriber Global</title>

<style>
body{
  font-family:Segoe UI,system-ui;
  background:#f1f5f9;
  padding:40px;
}
.container{
  max-width:700px;
  margin:auto;
  background:#fff;
  border:2px solid #0f172a;
  border-radius:12px;
  overflow:hidden;
}
.header{
  background:#0f172a;
  color:#fff;
  padding:15px 20px;
  display:flex;
  justify-content:space-between;
}
.body{
  padding:25px;
}
select,input,button{
  width:100%;
  padding:12px;
  margin-bottom:15px;
  border-radius:6px;
  border:1px solid #ccc;
}
button{
  background:#c5a059;
  font-weight:bold;
  cursor:pointer;
}
.notice{
  background:#f8fafc;
  padding:12px;
  border-radius:6px;
  font-size:13px;
  margin-bottom:15px;
}
</style>
</head>

<body>

<div class="container">
<div class="header">
  <div>‚†É‚†ó‚†á BRAILLE TRANSCRIBER GLOBAL</div>
  <div>v1.1</div>
</div>

<div class="body">

<div class="notice" id="noticeBox"></div>

<label id="labelUrl"></label>
<input type="text" id="urlInput">

<label id="labelLang"></label>
<select id="lang">
<option value="pt">Portugu√™s</option>
<option value="en">English</option>
<option value="es">Espa√±ol</option>
<option value="fr">Fran√ßais</option>
<option value="de">Deutsch</option>
<option value="it">Italiano</option>
</select>

<button id="generateBtn" onclick="generate()"></button>

</div>
</div>

<script>

/* =========================
   TRADU√á√ïES PROFISSIONAIS
========================= */

const translations = {

pt:{
notice:`<strong>Aviso Importante:</strong><br>
Este gerador produz Braille textual padr√£o internacional (Unicode).
Destina-se √† impress√£o em embossers compat√≠veis.
N√£o contempla nota√ß√£o matem√°tica ou cient√≠fica avan√ßada.`,
labelUrl:"URL da postagem:",
placeholder:"Cole aqui a URL do seu post do Blogger",
labelLang:"Idioma do conte√∫do:",
button:"Gerar arquivo Braille",
alertUrl:"Por favor, informe a URL da postagem.",
alertError:"N√£o foi poss√≠vel acessar o conte√∫do da postagem.",
filename:"documento_braille.brf"
},

en:{
notice:`<strong>Important Notice:</strong><br>
This generator produces standard international Braille (Unicode).
Intended for printing on compatible Braille embossers.
Does not support advanced mathematical or scientific notation.`,
labelUrl:"Post URL:",
placeholder:"Paste the URL of your Blogger post here",
labelLang:"Content language:",
button:"Generate Braille file",
alertUrl:"Please enter the post URL.",
alertError:"Unable to access the post content.",
filename:"braille_document.brf"
},

es:{
notice:`<strong>Aviso Importante:</strong><br>
Este generador produce Braille textual est√°ndar internacional (Unicode).
Est√° destinado a la impresi√≥n en embossers compatibles.
No admite notaci√≥n matem√°tica o cient√≠fica avanzada.`,
labelUrl:"URL de la publicaci√≥n:",
placeholder:"Pegue aqu√≠ la URL de su entrada de Blogger",
labelLang:"Idioma del contenido:",
button:"Generar archivo Braille",
alertUrl:"Por favor, introduzca la URL de la publicaci√≥n.",
alertError:"No se pudo acceder al contenido de la publicaci√≥n.",
filename:"documento_braille.brf"
},

fr:{
notice:`<strong>Avis Important :</strong><br>
Ce g√©n√©rateur produit du Braille standard international (Unicode).
Destin√© √† l‚Äôimpression sur des embossers compatibles.
Ne prend pas en charge la notation math√©matique ou scientifique avanc√©e.`,
labelUrl:"URL de l‚Äôarticle :",
placeholder:"Collez ici l‚ÄôURL de votre article Blogger",
labelLang:"Langue du contenu :",
button:"G√©n√©rer le fichier Braille",
alertUrl:"Veuillez saisir l‚ÄôURL de l‚Äôarticle.",
alertError:"Impossible d‚Äôacc√©der au contenu de l‚Äôarticle.",
filename:"document_braille.brf"
},

de:{
notice:`<strong>Wichtiger Hinweis:</strong><br>
Dieser Generator erzeugt internationales Standard-Braille (Unicode).
Vorgesehen f√ºr den Druck auf kompatiblen Braille-Embossern.
Unterst√ºtzt keine erweiterte mathematische oder wissenschaftliche Notation.`,
labelUrl:"Beitrags-URL:",
placeholder:"F√ºgen Sie hier die URL Ihres Blogger-Beitrags ein",
labelLang:"Inhaltssprache:",
button:"Braille-Datei erstellen",
alertUrl:"Bitte geben Sie die Beitrags-URL ein.",
alertError:"Der Inhalt des Beitrags konnte nicht abgerufen werden.",
filename:"braille_dokument.brf"
},

it:{
notice:`<strong>Avviso Importante:</strong><br>
Questo generatore produce Braille standard internazionale (Unicode).
Destinato alla stampa su embossers compatibili.
Non supporta notazione matematica o scientifica avanzata.`,
labelUrl:"URL del post:",
placeholder:"Incolla qui l‚ÄôURL del tuo post Blogger",
labelLang:"Lingua del contenuto:",
button:"Genera file Braille",
alertUrl:"Inserisci l‚ÄôURL del post.",
alertError:"Impossibile accedere al contenuto del post.",
filename:"documento_braille.brf"
}

};

/* =========================
   TROCA DE IDIOMA
========================= */

function updateLanguage(){
  const lang=document.getElementById("lang").value;
  const t=translations[lang];

  document.getElementById("noticeBox").innerHTML=t.notice;
  document.getElementById("labelUrl").innerText=t.labelUrl;
  document.getElementById("urlInput").placeholder=t.placeholder;
  document.getElementById("labelLang").innerText=t.labelLang;
  document.getElementById("generateBtn").innerText=t.button;
}

document.getElementById("lang").addEventListener("change",updateLanguage);
updateLanguage();

/* =========================
   MAPA BRAILLE SIMPLIFICADO
========================= */

const brailleMap={
a:"‚†Å",b:"‚†É",c:"‚†â",d:"‚†ô",e:"‚†ë",f:"‚†ã",g:"‚†õ",h:"‚†ì",i:"‚†ä",j:"‚†ö",
k:"‚†Ö",l:"‚†á",m:"‚†ç",n:"‚†ù",o:"‚†ï",p:"‚†è",q:"‚†ü",r:"‚†ó",s:"‚†é",t:"‚†û",
u:"‚†•",v:"‚†ß",w:"‚†∫",x:"‚†≠",y:"‚†Ω",z:"‚†µ"," ":"‚†Ä","\n":"\n"
};

/* =========================
   GERA√á√ÉO DO ARQUIVO
========================= */

async function generate(){

  const lang=document.getElementById("lang").value;
  const t=translations[lang];
  const url=document.getElementById("urlInput").value.trim();

  if(!url){
    alert(t.alertUrl);
    return;
  }

  try{
    const proxy="https://api.allorigins.win/raw?url=";
    const response=await fetch(proxy+encodeURIComponent(url));
    const html=await response.text();

    const parser=new DOMParser();
    const doc=parser.parseFromString(html,"text/html");

    const content=doc.querySelector("article")?.innerText ||
                  doc.querySelector(".post-body")?.innerText ||
                  doc.body.innerText;

    // üî• CORRE√á√ÉO DEFINITIVA DE ACENTOS
    const text=content
      .normalize("NFD")
      .replace(/[\u0300-\u036f]/g,"")
      .toLowerCase();

    let result="";
    for(let c of text){
      result+=brailleMap[c]||"";
    }

    const blob=new Blob([result],{type:"text/plain;charset=utf-8"});
    const a=document.createElement("a");
    a.href=URL.createObjectURL(blob);
    a.download=t.filename;
    a.click();

  }catch(e){
    alert(t.alertError);
  }

}

</script>

</body>
</html>
